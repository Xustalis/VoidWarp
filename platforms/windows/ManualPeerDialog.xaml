<Window x:Class="VoidWarp.Windows.ManualPeerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="手动添加设备"
        Height="320"
        Width="400"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#1A1A2E">
    
    <Window.Resources>
        <!-- Android-aligned theme -->
        <SolidColorBrush x:Key="PrimaryBrush" Color="#6C63FF"/>
        <SolidColorBrush x:Key="SurfaceBrush" Color="#16213E"/>
        <SolidColorBrush x:Key="SurfaceLightBrush" Color="#4A4E69"/>
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="#B0B0B0"/>
        <SolidColorBrush x:Key="TextTertiaryBrush" Color="#888888"/>
        
        <Style x:Key="InputStyle" TargetType="TextBox">
            <Setter Property="Height" Value="40"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Background" Value="{StaticResource SurfaceLightBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#333"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ScrollViewer x:Name="PART_ContentHost" 
                                          Margin="{TemplateBinding Padding}"
                                          VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Height" Value="36"/>
            <Setter Property="Padding" Value="20,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="8" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.85"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <Border Background="{StaticResource SurfaceBrush}" 
            CornerRadius="12" 
            Margin="16"
            Padding="20">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <TextBlock Grid.Row="0"
                       Text="手动添加设备"
                       FontSize="18"
                       FontWeight="SemiBold"
                       Foreground="{StaticResource PrimaryBrush}"
                       Margin="0,0,0,16"/>

            <!-- Hint -->
            <TextBlock Grid.Row="1"
                       Text="输入 Windows 设备的 IP 地址和端口"
                       Foreground="{StaticResource TextSecondaryBrush}"
                       FontSize="12"
                       Margin="0,0,0,12"/>

            <!-- IP Address -->
            <TextBlock Grid.Row="2"
                       Text="IP 地址"
                       Foreground="{StaticResource TextSecondaryBrush}"
                       FontSize="12"
                       FontWeight="Medium"
                       Margin="0,0,0,6"/>
            <TextBox x:Name="IpBox"
                     Grid.Row="3"
                     Style="{StaticResource InputStyle}"
                     Text="192.168."
                     Margin="0,0,0,16"/>

            <!-- Port -->
            <StackPanel Grid.Row="4">
                <TextBlock Text="端口"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           FontSize="12"
                           FontWeight="Medium"
                           Margin="0,0,0,6"/>
                <TextBox x:Name="PortBox"
                         Style="{StaticResource InputStyle}"
                         Text="42424"/>
            </StackPanel>

            <!-- Tip (matches Android) -->
            <TextBlock Grid.Row="5" 
                       Foreground="{StaticResource TextTertiaryBrush}"
                       FontSize="10"
                       Margin="0,12,0,0"
                       TextWrapping="Wrap">
                <Run Text="提示: USB 连接时使用 127.0.0.1:42424"/>
                <LineBreak/>
                <Run Text="(需先在 PC 上运行 adb reverse tcp:42424 tcp:42424)"/>
            </TextBlock>

            <!-- Buttons -->
            <StackPanel Grid.Row="6" 
                        Orientation="Horizontal" 
                        HorizontalAlignment="Right" 
                        Margin="0,20,0,0">
                <Button Content="取消"
                        Style="{StaticResource ModernButton}"
                        Width="90"
                        Margin="0,0,10,0"
                        Click="Cancel_Click"
                        Background="{StaticResource SurfaceLightBrush}"
                        Foreground="{StaticResource TextPrimaryBrush}"/>
                <Button Content="添加"
                        Style="{StaticResource ModernButton}"
                        Width="90"
                        Click="Ok_Click"
                        Background="{StaticResource PrimaryBrush}"
                        Foreground="#FFFFFF"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
